# -*- coding: utf-8 -*-
"""
Created on Fri Mar 29 03:32:15 2019

@author: Guillaume
"""


import folium
import pandas as pd
from folium.plugins import MarkerCluster
import matplotlib.pyplot as plt
import numpy as np
import calendar

crime = pd.read_csv(r"C:\Users\Guillaume\Documents\Hacker\boston_crimes\crime.csv",error_bad_lines=False,encoding = 'unicode_escape',sep=';')
crime = crime.dropna()


# create empty map zoomed in on Boston
map = folium.Map(location=(42.31, -71.01), zoom_start=12)
marker_cluster = MarkerCluster().add_to(map)

#adding marker and popup of city and crime-name
for i in range(1,len(crime.STREET)):
    folium.Marker([float(crime.lon.iloc[i])  ,float(crime.lat.iloc[i])],popup="crime ="+crime.OFFENSE_DESCRIPTION.iloc[i]+"\n").add_to(marker_cluster)

#we can change tiles with help of LayerConrol
folium.LayerControl().add_to(map)
map.save('osm.html')

# number of crime per month
number = crime["MONTH"].value_counts()
number = number.sort_index()
number.plot(kind='bar') 
plt.xticks(np.arange(13), calendar.month_name[1:13])
plt.title("Number of violation per month")
plt.show()

#number of crime per day
number = crime["DAY_OF_WEEK"].value_counts()
number = number.sort_index()
number.plot(kind='barh') 
plt.title("Boston crime per day")
plt.show()
